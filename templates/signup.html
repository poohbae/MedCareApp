{% extends "base.html" %}
{% block title %}Sign Up - Medcare App{% endblock %}
{% block content_class %}centered{% endblock %}
{% block content %}
<div class="signup-container">
    <h2>Sign Up</h2>
    <form id="signupForm" method="POST" action="{{ url_for('signup') }}">
        <input type="text" name="name" id="name" placeholder="Name" required>
        <input type="email" name="email" id="email" placeholder="Email" required>
        <input type="text" name="phone_number" id="phone_number" placeholder="Phone Number" required>

        <div class="signup-password-container">
            <input type="password" name="password" id="password" placeholder="Password" required>
            <i class="fa-solid fa-eye" id="togglePassword"></i>
        </div>

        <small class="password-hint">
            <i class="fa-solid fa-lock"></i> 
            Use at least 8 characters, including uppercase, lowercase, and numbers.
        </small>

        <div class="signup-password-container">
            <input type="password" name="confirm_password" id="confirm_password" placeholder="Confirm Password" required>
            <i class="fa-solid fa-eye" id="toggleConfirmPassword"></i>
        </div>

        <button type="submit" class="nav-btn">Sign Up</button>
    </form>
    <p class="security-hint">
        <i class="fa-solid fa-shield-halved"></i>
        Do not share your password or personal information with others.
    </p>
    <p>Already have an account? <a href="{{ url_for('login') }}">Login</a></p>
</div>

<script>
document.getElementById('togglePassword').addEventListener('click', function() {
    const passwordField = document.getElementById('password');
    const type = passwordField.getAttribute('type') === 'password' ? 'text' : 'password';
    passwordField.setAttribute('type', type);
    this.classList.toggle('fa-eye');
    this.classList.toggle('fa-eye-slash');
});

document.getElementById('toggleConfirmPassword').addEventListener('click', function() {
    const confirmField = document.getElementById('confirm_password');
    const type = confirmField.getAttribute('type') === 'password' ? 'text' : 'password';
    confirmField.setAttribute('type', type);
    this.classList.toggle('fa-eye');
    this.classList.toggle('fa-eye-slash');
});

document.getElementById("password").addEventListener("input", function() {
    const hint = document.querySelector(".password-hint");
    const pwd = this.value;

    if (pwd.length < 8) {
        hint.textContent = "Password too short (min 8 characters)";
        hint.style.color = "red";
    } else if (!/[A-Z]/.test(pwd) || !/[a-z]/.test(pwd) || !/[0-9]/.test(pwd)) {
        hint.textContent = "Add uppercase, lowercase, and number for better security.";
        hint.style.color = "orange";
    } else {
        hint.textContent = "Strong password!";
        hint.style.color = "green";
    }
});
</script>
{% endblock %}